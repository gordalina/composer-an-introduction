<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Composer - An Introduction</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
        <meta name="author" content="Samuel Gordalina">
        <meta name="email" content="samuel.gordalina@gmail.com">
        <meta name="date" content="2012-12-06">
        <meta name="venue" content="phplx.net - December 2012">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/github.css">
        <!-- ascetic default -->

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

        <link href='http://fonts.googleapis.com/css?family=Sanchez' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Gentium+Book+Basic:700' rel='stylesheet' type='text/css'>

        <style type="text/css">
            .hidden {
                visibility: hidden;
            }

            img.seamless {
                border:0 ! important;
                box-shadow:0 0 0px !important;
            }

            a {
                color: #4099FF;
            }

            .footer {
                position:absolute;
                bottom:0;
                left:0;
                width:100%;
                padding:10px ! important;
            }

            .footer p {
                font-size:11px;
                line-height:1.1em;
                margin-bottom: 0;
            }
        </style>
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>Composer</h1>
                    <h3>An Introduction</h3>

                    <img src="resources/phplx.png" alt="phplx" width="200" height="200" class="seamless" />

                    <p>
                        Samuel Gordalina
                        <br/>
                        <a href="https://twitter.com/sgordalina">@sgordalina</a>
                    </p>
                </section>

                <section>
                        <img src="resources/nelmio.png" alt="nelmio" class="seamless" />
                        <a href="http://nelm.io/samuel">http://nelm.io/samuel</a>
                </section>

				<section>
                    <img src="resources/composer-logo-large.png" alt="Composer" class="seamless" />
				</section>

                <section>
                    <h3>Dependency Management for PHP</h3>
                    <a href="http://getcomposer.com/">http://getcomposer.org</a>
                </section>

                <section>
                    <ol>
                        <li>What problem does it solve?</li>
                        <li class="muted">How does it do it?</li>
                        <li class="muted">How to use it?</li>
                        <li class="muted">How to use dependencies?</li>
                        <li class="muted">Where do packages live?</li>
                    </ol>

                    <aside class="notes">
                        yep, you've guessed it
                        <br/>
                        -- dependency management
                    </aside>
                </section>

                <section>
                    <h2>Dependency Management</h2>
                    <ul>
                        <li class="fragment">Copy-Paste</li>
                        <li class="fragment">VCS dependencies</li>
                        <li class="fragment">Propietary dependencies</li>
                    </ul>

                    <aside class="notes">
                        3rd part libraries
                        <br/>
                        git submodules, svn externals
                        <br/>
                        proprietary libraries not publicly available (satis)
                    </aside>
                </section>

                <section>
                    <ol>
                        <li class="muted">What problem does it solve?</li>
                        <li>How does it do it?</li>
                        <li class="muted">How to use it?</li>
                        <li class="muted">How to use dependencies?</li>
                        <li class="muted">Where do packages live?</li>
                    </ol>
                </section>

                <section>
                    <h2>composer.json</h2>
                    <pre><code contenteditable>
// composer.json
{
    "name": "phplx/phplx.net",
    "require": {
        "monolog/monolog": "1.1.*"
    }
}
                    </code></pre>

                    <aside class="notes">
                        similar to package.json (nodejs / commonjs / gemspec)
                        <br/>
                        The name is a valid github vendor/package, maps well to filesystems
                    </aside>
                </section>

                <section>
                    <h3>Packages as Dependencies</h3>
                    <pre class="fragment"><code contenteditable>
// subset of composer.json
"require": {
    "monolog/monolog": "1.1.*"
}
                    </code></pre>
                    <p class="fragment"><em>monolog/monolog</em> is the <strong>package</strong></p>
                    <p class="fragment"><code>1.1.0</code> is the <strong>version</strong></p>
                </section>

                <section>
                    <h2>Package Versions</h2>
                    <div class="fragment">
                        <p>Exact</p>
                        <pre><code>"monolog/monolog": "1"           // 1.0.0
"monolog/monolog": "1.1"         // 1.1.0
"monolog/monolog": "1.2.0"       // 1.2.0</code></pre>
                    </div>

                    <div class="fragment">
                        <p>Range</p>
                        <pre><code>"monolog/monolog": ">=1.2.0"     // 1.2.4 - latest version
"monolog/monolog": "&gt;=1.2,&lt;1.3"  // 1.2.4 - AND operator
"monolog/monolog": "1.2.*"       // 1.2.4 - same as "&gt;=1.2,&lt;1.3"</code></pre>
                    </div>

                    <div class="fragment">
                        <p>Wildcard</p>
                        <pre><code>"monolog/monolog": "1.2.*"       // 1.2.4 - same as "&gt;=1.2,&lt;1.3"</code></pre>
                    </div>

                    <div class="fragment">
                        <p>Next Significant Release</p>
                        <pre><code>"monolog/monolog": "~1.2.1"      // same as "&gt;=1.2.1,&lt;2.0"</code></pre>
                    </div>

                    <div class="fragment">
                        <p>Branches</p>
                        <pre><code>"monolog/monolog": "dev-master"  // last commit from branch master</code></pre>
                    </div>

                    <aside class="notes">
                        exact
                        <br/>
                        range
                        <br/>
                        wildcard
                        <br/>
                        branches
                        <br/>
                        composer reads from github tags/branches
                    </aside>
                </section>

                <section>
                    <ol>
                        <li class="muted">What problem does it solve?</li>
                        <li class="muted">How does it do it?</li>
                        <li>How to use it?</li>
                        <li class="muted">How to use dependencies?</li>
                        <li class="muted">Where do packages live?</li>
                    </ol>
                </section>

                <section>
                    <h2>Installing Composer</h2>
                    <pre class="fragment"><code contenteditable>
$ curl -s https://getcomposer.org/installer | php
                    </code></pre>

                    <pre class="fragment"><code contenteditable>
$ php composer.phar --version
Composer version 04c6670
                    </code></pre>
                </section>



                <section>
                    <h2>Installing Dependencies</h2>
                    <pre class="fragment"><code contenteditable>
// composer.json (first)
{
    "name": "phplx/phplx.net",
    "require": {
        "monolog/monolog": "1.1.*"
    }
}
                    </code></pre>
                    <pre class="fragment"><code contenteditable>
$ php composer.phar install
Loading composer repositories with package information
Installing dependencies
  - Installing monolog/monolog (1.1.0)
    Downloading: 100%
...
Writing lock file
Generating autoload files
                    </code></pre>
                </section>

                <section>
                    <h2>Updating Dependencies</h2>
                    <pre class="fragment"><code>$ php composer.phar update
Loading composer repositories with package information
Updating dependencies
  - Removing monolog/monolog (1.1.0)
  - Installing monolog/monolog (1.2.1)

Writing lock file
Generating autoload files
</code></pre>
                    <div class="fragment">
                        <p>How to update a single package</p>
                        <pre><code>$ php composer.phar update monolog/monolog</code></pre>
                    </div>
                </section>

                <section>
                    <h2>Filesystem</h2>
                    <pre><code contenteditable>
$ tree -L 3
.
|-- composer.json
|-- composer.lock
|-- composer.phar
`-- vendor
    |-- autoload.php
    |-- composer
    |   |-- ClassLoader.php
    |   |-- autoload_classmap.php
    |   |-- autoload_namespaces.php
    |   |-- autoload_real.php
    |   `-- installed.json
    `-- monolog
        `-- monolog
                    </code></pre>
                </section>

                <section>
                    <ol>
                        <li class="muted">What problem does it solve?</li>
                        <li class="muted">How does it do it?</li>
                        <li class="muted">How to use it?</li>
                        <li>How to use dependencies?</li>
                        <li class="muted">Where do packages live?</li>
                    </ol>
                </section>

				<section>
                    <h2>Goodbye includes</h2>
                    <pre><code contenteditable>
&lt;?php // my-awesome-file.php

use Monolog\Logger;

include 'vendor/autoload.php';

$world = new Logger('world');
$world->addNotice('Hello!');
                    </code></pre>
				</section>

                <section>
                    <h2>Autoloader</h2>
                    <p>Composer is PSR-0 Compatible</p>

                    <a href="http://php-fig.org/">http://php-fig.org</a>

                    <aside class="notes">
                        PHP Framework Interoperability Group
                        <br/>
                        PSR-0 is a standard in FIG that defines how a project must expose it's classes (both in naming and file system structure) so that they can be consumed by the end-user.
                        <br/>
                        Does composer play ball with teams?
                    </aside>
                </section>

                <section>
                    <ol>
                        <li class="muted">What problem does it solve?</li>
                        <li class="muted">How does it do it?</li>
                        <li class="muted">How to use it?</li>
                        <li class="muted">How to use dependencies?</li>
                        <li>Where do packages live?</li>
                    </ol>
                </section>

                <section>
                    <img src="resources/packagist-website.png" alt="Packagist" class="seamless" />
                </section>

                <section>
                    <h2>Packagist</h2>
                    <ul>
                        <li class="fragment">Package Repository</li>
                        <li class="fragment">Everyone can submit packages</li>
                        <li class="fragment">&gt;5.3k packages</li>
                        <li class="fragment">&gt;6.6M package installations</li>
                    </ul>

                    <p class="fragment muted">statistics since April '12</p>
                </section>

                <section>
                    <h1>Tips &amp; Tricks</h1>
                </section>

                <section>
                    <h2>Minimum Stability</h1>
                    <pre><code contenteditable>
// composer.json
{
    "name": "phplx/phplx.net",
    "require": {
        "monolog/monolog": "1.2.*"
    },
    "minimum-stability": "dev",
}
                    </code></pre>
                    <ul class="fragment">
                        <li>Filters packages by their stability</li>
                        <li>Defaults to <code>stable</code></li>
                    </ul>

                    <aside class="notes">
                        minimum stability is exposed in the project being required as stable or dev
                        "filters & default stable" as fragments
                    </aside>
                </section>

                <section>
                    <h2>Development Dependencies</h1>
                    <pre><code contenteditable>
// composer.json
{
    "name": "phplx/phplx.net",
    "require": {
        "monolog/monolog": "1.2-x"
    },
    "require-dev": {
        "phpunit/phpunit": "3.7.*"
    },
}
                    </code></pre>
                    <pre class="fragment"><code contenteditable>$ php composer.phar install --dev</code></pre>

                    <aside class="notes">
                        composer install --dev as a fragment
                    </aside>
                </section>

                <section>
                    <h2>Team Collaboration</h2>
                </section>

                <section>
                    <h1>VCS</h1>
                    <h3>✔ composer.json</h3>
                    <h3 class="fragment">✔ composer.lock</h3>
                    <h3 class="fragment">✘ vendor/</h3>
                    <pre class="fragment"><code contenteditable>
// .gitignore

vendor/
                    </code></pre>
                </section>

                <section>
                    <pre><code contenteditable>
// composer.lock
{
    "hash": "4fafda37596ee760540a19e39df1377d",
    "packages": [
        {
            "name": "monolog/monolog",
            "version": "1.2.1",
            "source": {
                "type": "git",
                "url": "https://github.com/Seldaek/monolog",
                "reference": "1.2.1"
            },
    ...
                    </code></pre>

                    <aside class="notes">
                        Some of you may have noticed that a file was generated.
                    </aside>
                </section>

                <section>
                    <h2>Updating composer.lock</h1>
                    <pre class="fragment"><code>php composer.phar update nothing</code></pre>
                </section>

                <section>
                    <h2>Updating composer</h1>
                    <pre class="fragment"><code>php composer.phar self-update</code></pre>
                    <p class="fragment">composer alpha builds expire in 30 days</p>
                </section>

                <section>
                    <h2>Optimizing autoloader performace</h1>
                    <pre class="fragment"><code>php composer.phar dump-autoload --optimize</code></pre>
                    <p class="fragment">Creates a classmap to avoid filesystem lookups</p>
                </section>

                <section>
                    <h2>Wrap-up</h1>

                    <div class="fragment">
                        Install dependencies once
                        <pre><code>php composer.phar install</code></pre>
                    </div>

                    <div class="fragment">
                        Update dependencies when you need
                        <pre><code>php composer.phar update</code></pre>
                    </div>

                    <div class="fragment">
                        Self-Update composer
                        <pre><code>php composer.phar self-update</code></pre>
                    </div>
                </section>

                <section>
                    <h2>Experiencing a strange behaviour?</h1>

                    <div class="fragment">
                        Update Composer
                        <pre><code>$ php composer.phar self-update</code></pre>
                    </div>

                    <div class="fragment">
                        Check your setup's settings
                        <pre><code>$ curl -s https://getcomposer.org/installer | php -- --check
</code></pre>
                    </div>

                    <div class="fragment">
                        Update your dependencies
                        <pre><code>$ php composer.phar update -v</code></pre>
                    </div>

                    <div class="fragment">
                        Still not working? Reinstall the deps
                        <pre><code>$ rm -rf vendor/
$ php composer.phar update -v</code></pre>
                    </div>

                    <div class="fragment">
                        Still not working?
                        <br/>
                        Report a bug with full --verbose output
                    </div>
                </section>

                <section>
                    <h2>Thank you.</h2>
                </section>

                <section>
                    <h2>Find Out More</h2>
                    <ul>
                        <li><a href="http://getcomposer.org">getcomposer.org</a></li>
                        <li><a href="http://packagist.org">packagist.org</a></li>
                        <li><a href="https://github.com/composer">github.com/composer</a></li>
                        <li><a href="https://groups.google.com/forum/#!forum/composer-dev">composer-dev google group</a></li>
                        <li><a href="irc://irc.freenode.org/composer">#composer</a> &amp; <a href="irc://irc.freenode.org/composer-dev">#composer-dev</a></li>
                    </ul>
                </section>

                <section>
                    <img src="resources/phplx.png" alt="phplx" width="200" height="200" class="seamless" />

                    <p>
                        Samuel Gordalina
                        <br/>
                        <a href="https://twitter.com/sgordalina">@sgordalina</a>
                        <br/>
                        <br/>
                        <a href="http://gordalina.com/talks/composer">http://gordalina.com/talks/composer</a>
                    </p>
                </section>
			</div>

            <div class="footer">
                <p class="left">Samuel Gordalina</p>
                <p class="left">@sgordalina</p>
            </div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: false,
				progress: true,
				history: true,
				center: true,

				theme: 'gordalina', // available themes are in /css/theme
				transition: 'none', // default/cube/page/concave/zoom/linear/none

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					//{ src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					//{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					//{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: '/socket.io/socket.io.js', async: true },
                    { src: 'plugin/notes-server/client.js', async: true }
					// { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
